# Example .env files for common Duckalog use cases

This directory contains example `.env` files for various deployment scenarios and use cases. Copy the appropriate file and customize the values for your environment.

## Quick Start

1. Choose the example that matches your use case
2. Copy to `.env` in your project directory  
3. Update the values with your actual credentials
4. Add `.env` to your `.gitignore` file
5. Use in your configuration with `${env:VARIABLE_NAME}` syntax

## Examples

### Development (.env.development)
Local development with minimal security requirements.

```bash
# Database connections
DB_HOST=localhost
DB_PORT=5432
DB_NAME=analytics_dev
DB_USER=dev_user
DB_PASSWORD=dev_password

# Cloud storage (development buckets)
S3_BUCKET=company-dev-data
AWS_ACCESS_KEY_ID=AKIA...
AWS_SECRET_ACCESS_KEY=...
AWS_REGION=us-east-1

# Application settings
ENVIRONMENT=development
MEMORY_LIMIT=1GB
THREAD_COUNT=2
CATALOG_NAME=dev_catalog

# File paths
DATA_PATH=./data
OUTPUT_PATH=./output
```

### Production (.env.production)
Production deployment with enhanced security.

```bash
# Database connections
DB_HOST=prod-db.company.com
DB_PORT=5432
DB_NAME=analytics_prod
DB_USER=analytics_user
DB_PASSWORD=<secure_production_password>
DB_SSL_MODE=require

# Cloud storage (production buckets)
S3_BUCKET=company-prod-data
AWS_ACCESS_KEY_ID=AKIA...
AWS_SECRET_ACCESS_KEY=...
AWS_REGION=us-west-2
AWS_SESSION_TOKEN=<if_using_temporary_credentials>

# Application settings
ENVIRONMENT=production
MEMORY_LIMIT=8GB
THREAD_COUNT=8
CATALOG_NAME=prod_catalog
LOG_LEVEL=INFO

# Security settings
API_KEY=<production_api_key>
ENCRYPTION_KEY=<encryption_key>
```

### Staging (.env.staging)
Staging environment with production-like settings.

```bash
# Database connections
DB_HOST=staging-db.company.com
DB_PORT=5432
DB_NAME=analytics_staging
DB_USER=staging_user
DB_PASSWORD=<staging_password>
DB_SSL_MODE=require

# Cloud storage (staging buckets)
S3_BUCKET=company-staging-data
AWS_ACCESS_KEY_ID=AKIA...
AWS_SECRET_ACCESS_KEY=...
AWS_REGION=us-east-1

# Application settings
ENVIRONMENT=staging
MEMORY_LIMIT=4GB
THREAD_COUNT=4
CATALOG_NAME=staging_catalog
LOG_LEVEL=DEBUG

# Testing flags
ENABLE_TEST_DATA=false
SKIP_DATA_VALIDATION=false
```

### Multi-Cloud (.env.multi-cloud)
Configuration for multiple cloud providers.

```bash
# AWS settings
AWS_ACCESS_KEY_ID=AKIA...
AWS_SECRET_ACCESS_KEY=...
AWS_REGION=us-west-2
S3_BUCKET=aws-data-bucket

# Google Cloud settings
GCS_PROJECT_ID=my-gcp-project
GCS_BUCKET=gcs-data-bucket
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json

# Azure settings
AZURE_STORAGE_ACCOUNT=myazureaccount
AZURE_STORAGE_KEY=<azure_storage_key>
AZURE_BUCKET=azure-data-bucket

# Default cloud provider
DEFAULT_CLOUD=aws
```

### Database-Focused (.env.database)
Configuration optimized for database operations.

```bash
# PostgreSQL connections
PG_HOST=postgres.example.com
PG_PORT=5432
PG_DATABASE=analytics
PG_USER=analytics_user
PG_PASSWORD=<pg_password>
PG_SSL_MODE=require
PG_CONNECTION_TIMEOUT=30
PG_MAX_CONNECTIONS=20

# Additional database settings
DB_POOL_SIZE=10
DB_QUERY_TIMEOUT=300
DB_BACKUP_ENABLED=true
DB_BACKUP_S3_BUCKET=company-db-backups
```

### Analytics (.env.analytics)
Configuration for analytics workloads.

```bash
# Data sources
ANALYTICS_DB_HOST=warehouse.example.com
ANALYTICS_DB_NAME=analytics_warehouse
ANALYTICS_DB_USER=warehouse_user
ANALYTICS_DB_PASSWORD=<warehouse_password>

# Data processing
MEMORY_LIMIT=16GB
THREAD_COUNT=16
BATCH_SIZE=10000
PROCESSING_TIMEOUT=3600

# Output settings
OUTPUT_FORMAT=parquet
COMPRESSION=snappy
PARTITION_BY=year,month

# Metrics and monitoring
ENABLE_METRICS=true
METRICS_S3_BUCKET=analytics-metrics
MONITORING_ENABLED=true
```

### Minimal (.env.minimal)
Minimal configuration for basic use cases.

```bash
# Basic settings
ENVIRONMENT=development
MEMORY_LIMIT=512MB
THREAD_COUNT=1
CATALOG_NAME=basic_catalog

# Optional defaults
DATA_PATH=./data
```

### CI/CD (.env.ci)
Configuration for continuous integration and deployment.

```bash
# CI-specific settings
ENVIRONMENT=ci
MEMORY_LIMIT=2GB
THREAD_COUNT=4
LOG_LEVEL=INFO

# Build settings
BUILD_NUMBER=${BUILD_NUMBER:-1}
COMMIT_SHA=${COMMIT_SHA:-unknown}
BRANCH_NAME=${BRANCH_NAME:-unknown}

# Testing flags
RUN_TESTS=true
GENERATE_REPORTS=true
UPLOAD_ARTIFACTS=true

# Artifact storage
ARTIFACT_S3_BUCKET=ci-artifacts
TEST_REPORTS_PATH=./test-reports
```

## Security Notes

⚠️ **Important Security Guidelines:**

1. **Never commit .env files** - Add to `.gitignore`:
   ```bash
   echo ".env*" >> .gitignore
   ```

2. **Use restrictive permissions**:
   ```bash
   chmod 600 .env
   ```

3. **Rotate secrets regularly** - Update passwords and API keys periodically

4. **Use different credentials** for each environment

5. **Validate .env files** before deployment:
   ```bash
   # Check for accidentally committed secrets
   grep -iE "(password|secret|key|token)" .env
   ```

6. **Use secret management** in production:
   - AWS Secrets Manager
   - Azure Key Vault  
   - Google Secret Manager
   - HashiCorp Vault

## Usage Examples

### Loading Environment-Specific .env Files

```bash
# Development
source .env.development
duckalog build catalog.yaml

# Production  
source .env.production
duckalog build catalog.yaml

# Staging
source .env.staging
duckalog build catalog.yaml
```

### Using with Docker

```dockerfile
# Dockerfile
COPY .env.production .env
RUN duckalog build catalog.yaml
```

### Using with Docker Compose

```yaml
# docker-compose.yml
services:
  duckalog:
    build: .
    env_file:
      - .env.production
    command: ["duckalog", "build", "catalog.yaml"]
```

### Using in Kubernetes

```yaml
# configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: duckalog-config
data:
  .env: |
    ENVIRONMENT=production
    MEMORY_LIMIT=4GB
    S3_BUCKET=prod-data
```

## Troubleshooting

### Common .env Issues

**File not found:**
```bash
# Check if .env exists in the right location
ls -la .env*
find . -name ".env" -type f
```

**Permissions issue:**
```bash
# Fix permissions
chmod 600 .env
ls -la .env
```

**Syntax errors:**
```bash
# Validate .env file format
python3 -c "
with open('.env') as f:
    for line_num, line in enumerate(f, 1):
        line = line.strip()
        if line and not line.startswith('#') and '=' not in line:
            print(f'Line {line_num}: Invalid format - {line}')
"
```

**Environment variable not found:**
```bash
# Check what variables are available
cat .env | grep -v '^#' | grep '=' | cut -d'=' -f1

# Test variable resolution
export TEST_VAR="test_value"
echo ${TEST_VAR}
```

For more information, see the [Environment Variables documentation](../examples/environment-vars.md).